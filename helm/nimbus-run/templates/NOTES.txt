apiVersion: v1
kind: ConfigMap
metadata:
  name: {{include "autoscaler.fullname" . }}
  labels:
    {{include "autoscaler.labels" .}}
data:
  config.yaml: |
    kafka:
      {{- with .Values.kafka }}
        {{- toYaml . | nindent 8}}
      {{- end }}

    github:
      {{- with .Values.github}}
        {{- toYaml . | nindent 8}}
      {{- end }}
    compute:
      {{- include "autoscaler.computeSettings" . | nindent 8}}